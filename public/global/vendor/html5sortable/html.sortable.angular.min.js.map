{"version":3,"sources":["html.sortable.angular.js"],"names":["angular","module","directive","$timeout","$parse","require","link","scope","element","attrs","ngModel","opts","model","scallback","noop","nativeElements","slice","call","htmlSortableCallback","extend","$eval","htmlSortable","sortable","$render","$watch","addEventListener","e","data","detail","$source","startparent","attr","$dest","endparent","$sourceModel","$destModel","$start","oldindex","$end","item","index","$apply","$items","splice","assign","$item","$sourceItems","$destItems","startModel","destModel","start","end"],"mappings":"CAWE,SAASA,GACT,YAEAA,GAAQC,OAAO,mBACZC,UAAU,gBACT,WAAY,SAAU,SAASC,EAAUC,GACvC,OACEC,QAAS,WAETC,KAAM,SAASC,EAAOC,EAASC,EAAOC,GACpC,GAAIC,GACAC,EACAC,EAAYb,EAAQc,KACpBC,KAAoBC,MAAMC,KAAKT,EAE/BC,GAAMS,uBACRL,EAAYT,EAAOK,EAAMS,uBAG3BP,EAAOX,EAAQmB,UAAWZ,EAAMa,MAAMX,EAAMY,eAC5CC,SAASP,EAAgBJ,GAErBD,IACFE,EAAQR,EAAOK,EAAMC,SAErBA,EAAQa,QAAU,WAChBpB,EAAS,WACPmB,SAASP,EAAgB,WACxB,KAGLR,EAAMiB,OAAOZ,EAAO,WAClBT,EAAS,WACPmB,SAASP,EAAgB,WACxB,MACF,GAEHA,EAAe,GAAGU,iBAAiB,aAAc,SAASC,GACxD,GAAIC,GAAOD,EAAEE,OACTC,EAAUF,EAAKG,YAAYC,KAAK,aAChCJ,EAAKG,YAAYC,KAAK,iBACtBC,EAAUL,EAAKM,UAAUF,KAAK,aAC9BJ,EAAKM,UAAUF,KAAK,iBAEpBG,EAAe9B,EAAOyB,GACtBM,EAAa/B,EAAO4B,GAEpBI,EAAST,EAAKU,SACdC,EAASX,EAAKY,KAAKC,OAEvBjC,GAAMkC,OAAO,WAGX,GAAIP,EAAaP,EAAKG,YAAYvB,WAAa4B,EAAWR,EAAKM,UAAU1B,SAAU,CAEjF,GAAImC,GAASR,EAAaP,EAAKG,YAAYvB,QAC3CmC,GAAOC,OAAOL,EAAM,EAAGI,EAAOC,OAAOP,EAAQ,GAAG,IAChDF,EAAaU,OAAOrC,EAAOmC,OACtB,CACL,GAAIG,GAAQX,EAAaP,EAAKG,YAAYvB,SAAS6B,GAC/CU,EAAeZ,EAAaP,EAAKG,YAAYvB,SAC7CwC,EAAaZ,EAAWR,EAAKM,UAAU1B,YAE3CuC,GAAaH,OAAOP,EAAQ,GAC5BW,EAAWJ,OAAOL,EAAM,EAAGO,GAE3BX,EAAaU,OAAOrC,EAAOuC,GAC3BX,EAAWS,OAAOrC,EAAOwC,MAI7BlC,EAAUN,GACRyC,WAAYd,EAAaP,EAAKG,YAAYvB,SAC1C0C,UAAWd,EAAWR,EAAKM,UAAU1B,SACrC2C,MAAOd,EACPe,IAAKb,aAQrBtC","file":"html.sortable.angular.min.js","sourcesContent":["/*\n * AngularJS integration with the HTML5 Sortable library\n * https://github.com/voidberg/html5sortable\n *\n * Copyright 2013, Alexandru Badiu <andu@ctrlz.ro>\n * jQuery-independent implementation by Nazar Mokrynskyi <nazar@mokrynskyi.com>\n *\n * Thanks to the following contributors: samantp.\n *\n * Released under the MIT license.\n */\n;(function(angular) {\n  'use strict';\n\n  angular.module('htmlSortable', [])\n    .directive('htmlSortable', [\n      '$timeout', '$parse', function($timeout, $parse) {\n        return {\n          require: '?ngModel',\n          // TODO: fix this, if you know angular\n          link: function(scope, element, attrs, ngModel) { // jshint ignore:line\n            var opts;\n            var model;\n            var scallback = angular.noop;\n            var nativeElements = [].slice.call(element);\n\n            if (attrs.htmlSortableCallback) {\n              scallback = $parse(attrs.htmlSortableCallback);\n            }\n\n            opts = angular.extend({}, scope.$eval(attrs.htmlSortable));\n            sortable(nativeElements, opts); // jshint ignore:line\n\n            if (ngModel) {\n              model = $parse(attrs.ngModel);\n\n              ngModel.$render = function() {\n                $timeout(function() {\n                  sortable(nativeElements, 'reload'); // jshint ignore:line\n                }, 50);\n              };\n\n              scope.$watch(model, function() {\n                $timeout(function() {\n                  sortable(nativeElements, 'reload'); // jshint ignore:line\n                }, 50);\n              }, true);\n\n              nativeElements[0].addEventListener('sortupdate', function(e) {\n                var data = e.detail;\n                var $source = data.startparent.attr('ng-model') ||\n                    data.startparent.attr('data-ng-model');\n                var $dest   = data.endparent.attr('ng-model') ||\n                    data.endparent.attr('data-ng-model');\n\n                var $sourceModel = $parse($source);\n                var $destModel = $parse($dest);\n\n                var $start = data.oldindex;\n                var $end   = data.item.index();\n\n                scope.$apply(function() {\n                  // TODO: fix this, if you know angular\n                  //jscs:disable\n                  if ($sourceModel(data.startparent.scope()) === $destModel(data.endparent.scope())) {\n                    //jscs:enable\n                    var $items = $sourceModel(data.startparent.scope());\n                    $items.splice($end, 0, $items.splice($start, 1)[0]);\n                    $sourceModel.assign(scope, $items);\n                  } else {\n                    var $item = $sourceModel(data.startparent.scope())[$start];\n                    var $sourceItems = $sourceModel(data.startparent.scope());\n                    var $destItems = $destModel(data.endparent.scope()) || [];\n\n                    $sourceItems.splice($start, 1);\n                    $destItems.splice($end, 0, $item);\n\n                    $sourceModel.assign(scope, $sourceItems);\n                    $destModel.assign(scope, $destItems);\n                  }\n                });\n\n                scallback(scope, {\n                  startModel: $sourceModel(data.startparent.scope()),\n                  destModel: $destModel(data.endparent.scope()),\n                  start: $start,\n                  end: $end\n                });\n              });\n            }\n          }\n        };\n      }\n    ]);\n}(angular));\n"],"sourceRoot":"/source/"}